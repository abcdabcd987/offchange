<% include head %>


<form role="form" action="/goods/new" method="post" enctype="multipart/form-data">
  <h2>Add a goods</h2>
  <div class="form-group">
    <label for="title">Title</label>
    <input type="text" class="form-control" id="title" placeholder="Simple words about the goods" name="title" value="<%= typeof(form.title) === 'undefined' ? '' : form.title %>" required>
  </div>
  <div class="form-group">
    <label for="content">Description</label>
    <textarea name="content" id="content" placeholder="Describe the goods in detail." class="form-control" rows="7" required><%= typeof(form.content) === 'undefined' ? '' : form.content %></textarea>
  </div>
  <div class="form-group">
    <label>Upload Image</label>
    <div class="upload-group">
    <% var count = form.fileCount || 1; %>
    <% for (var i = 0; i < count; ++i) { %>
      <input type="file" class="form-control" name="images[<%= i %>]">
    <% } %>
    </div>
    <a class="btn btn-default add-upload">Add an image</a>
  </div>
  <div class="form-group">
    <label for="tags">Tags</label>
    <input type="text" class="form-control" id="tags" placeholder="Classify the goods, use ',' to split up." name="tags" value="<%= typeof(form.tags) === 'undefined' ? '' : form.tags %>" required>
  </div>
  <button type="submit" class="btn btn-primary">Post</button>
</form>

<% include foot_script %>
<script>
var totfiles = 1;
$(".add-upload").on('click', function(e) {
  e.preventDefault();
  $('.upload-group').append('<input type="file" class="form-control" name="images['+ (totfiles++) +']">');
  return false;
})
</script>
<% include foot_close %>